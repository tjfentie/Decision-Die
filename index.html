<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Category Dice Roller</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .container { display: flex; gap: 20px; }
    .category { border: 1px solid #ccc; padding: 16px; border-radius: 12px; width: 30%; }
    .category h2 { margin-top: 0; }
    .item-row { display: flex; gap: 6px; margin-bottom: 6px; }
    .item-row input { flex: 1; padding: 6px; }
    button { padding: 8px; cursor: pointer; margin-top: 6px; }
    .output { font-size: 1.5rem; margin-top: 20px; font-weight: bold; }
    .profile-controls { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Category Dice Roller</h1>

  <div class="container">
    <div class="category" id="cat1">
      <h2>First Priority</h2>
      <div class="items"></div>
      <button onclick="addItem('cat1')">Add Item</button>
    </div>

    <div class="category" id="cat2">
      <h2>Second Priority</h2>
      <div class="items"></div>
      <button onclick="addItem('cat2')">Add Item</button>
    </div>

    <div class="category" id="cat3">
      <h2>Third Priority</h2>
      <div class="items"></div>
      <button onclick="addItem('cat3')">Add Item</button>
    </div>
  </div>

  <button onclick="rollDice()">Roll</button>

  <div class="profile-controls">
    <h3>Save Profile</h3>
    <input id="profileName" placeholder="Profile name" />
    <button onclick="saveProfile()">Save Profile</button>

    <h3>Load / Delete Profile</h3>
    <select id="profileSelect"></select>
    <button onclick="loadProfile()">Load</button>
    <button onclick="deleteProfile()">Delete</button>
  </div>

  <div class="output" id="result"></div>

  <script>
    function addItem(catId, value = "") {
      const container = document.querySelector(`#${catId} .items`);
      const row = document.createElement('div');
      row.className = 'item-row';

      row.innerHTML = `
        <input type="text" value="${value}" />
        <button onclick="this.parentElement.remove()">✕</button>
      `;

      container.appendChild(row);
    }

    function getItems(catId) {
      return [...document.querySelectorAll(`#${catId} .item-row input`)]
        .map(i => i.value.trim())
        .filter(v => v);
    }

    function setItems(catId, items) {
      const container = document.querySelector(`#${catId} .items`);
      container.innerHTML = "";
      items.forEach(i => addItem(catId, i));
    }

    function rollDice() {
      const c1 = getItems('cat1');
      const c2 = getItems('cat2');
      const c3 = getItems('cat3');

      if (!c1.length || !c2.length || !c3.length) {
        alert('Each category must have at least one item.');
        return;
      }

      const r1 = c1[Math.floor(Math.random() * c1.length)];
      const r2 = c2[Math.floor(Math.random() * c2.length)];
      const r3 = c3[Math.floor(Math.random() * c3.length)];

      document.getElementById('result').textContent = `→ ${r1} | ${r2} | ${r3}`;
    }

    function saveProfile() {
      const name = document.getElementById('profileName').value.trim();
      if (!name) { alert('Enter a profile name.'); return; }

      const profiles = JSON.parse(localStorage.getItem('profiles') || '{}');
      profiles[name] = {
        cat1: getItems('cat1'),
        cat2: getItems('cat2'),
        cat3: getItems('cat3')
      };

      localStorage.setItem('profiles', JSON.stringify(profiles));
      loadProfileList();
      alert('Saved!');
    }

    function loadProfileList() {
      const select = document.getElementById('profileSelect');
      select.innerHTML = '';
      const profiles = JSON.parse(localStorage.getItem('profiles') || '{}');

      Object.keys(profiles).forEach(name => {
        const opt = document.createElement('option');
        opt.value = name;
        opt.textContent = name;
        select.appendChild(opt);
      });
    }

    function loadProfile() {
      const name = document.getElementById('profileSelect').value;
      if (!name) return;

      const profiles = JSON.parse(localStorage.getItem('profiles') || '{}');
      const p = profiles[name];

      setItems('cat1', p.cat1);
      setItems('cat2', p.cat2);
      setItems('cat3', p.cat3);
    }

    function deleteProfile() {
      const name = document.getElementById('profileSelect').value;
      if (!name) return;

      const profiles = JSON.parse(localStorage.getItem('profiles') || '{}');
      delete profiles[name];
      localStorage.setItem('profiles', JSON.stringify(profiles));
      loadProfileList();
      alert('Deleted!');
    }

    addItem('cat1');
    addItem('cat2');
    addItem('cat3');
    loadProfileList();
  </script>
</body>
</html>
